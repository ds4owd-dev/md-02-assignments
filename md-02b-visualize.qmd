---
title: "Visualize"
author: ""
format:
  html:
    embed-resources: true
editor: visual
execute:
  warning: false
editor_options:
  chunk_output_type: console
---

## Task 1: Load packages

1.  Run the code chunk below to load the required packages.

```{r}
library(gapminder)
library(ggplot2)
library(dplyr)
library(sf)
library(rnaturalearth)
```

## Task 2: Create data for visualization

1.  Run the three code chunks below to create the data objects needed for the visualization tasks.

2.  Check in the Environment pane that the three objects have been created correctly. 

```{r}
gapminder_2007 <- gapminder |>
  filter(year == 2007)
```

```{r}
gapminder_summary_2007 <- gapminder_2007 |>
  group_by(continent) |>
  summarise(
    count = n(),
    lifeExp = median(lifeExp)
  )
```

```{r}
gapminder_summary_continent_year <- gapminder |>
  group_by(continent, year) |>
  summarise(lifeExp = median(lifeExp))
```

## Task 3: Create a boxplot

1.  Write code to create a boxplot showing life expectancy by continent.

2.  Start with: `ggplot(data = gapminder_2007)` to use the `gapminder_2007` object as the data for plot.

3. Then, add a comma after `gapminder_2007` and add `mapping = aes()` function.

4. Inside `aes()`, add the following aesthetic mappings: 

-   year to the x-axis;
-   life expectancy to the y-axis;

5.  Add a `+` at the end of the line, then on a new line add: `geom_boxplot()`

4.  Run the code and verify you see 5 boxes.

```{r}
ggplot(data = gapminder_2007, 
       mapping = aes(x = continent, 
                     y = lifeExp)) +
  geom_boxplot()
```

## Task 4: Create a timeseries plot

1.  Write code to create a timeseries plot showing how median life expectancy changed over time for each continent.

2.  Start with: `ggplot(data = gapminder_summary_continent_year)` to use the `gapminder_summary_continent_year` object as the data for plot.

3.  Then, add a comma after `gapminder_summary_continent_year` and add `mapping = aes()` function.

4.  Inside `aes()`, add the following aesthetic mappings:

-   year to the x-axis;
-   life expectancy to the y-axis;
-   continent to color using the `color = continent` argument

5.  Add a `+` at the end of the line, then on a new line add: `geom_line()`

6.  Add another `+` at the end of the line, then on a new line add: `geom_point()`

7.  Run the code and verify you see 5 colored lines with points showing trends over time.

```{r}
ggplot(data = gapminder_summary_continent_year,
       mapping = aes(x = year,
                     y = lifeExp,
                     color = continent)) +
  geom_line() +
  geom_point()
```

## Task 5: Create a barplot

### with `geom_col()`

1.  Write code to create a barplot showing the number of countries per continent.

2.  Start with: `ggplot(data = gapminder_summary_2007)` to use the `gapminder_summary_2007` object as the data for plot.

3.  Then, add a comma after `gapminder_summary_2007` and add `mapping = aes()` function.

4.  Inside `aes()`, add the following aesthetic mappings:

-   continent to the x-axis;
-   count to the y-axis;

5.  Add a `+` at the end of the line, then on a new line add: `geom_col()`

6.  Run the code and verify you see 5 bars showing counts per continent.

```{r}
ggplot(data = gapminder_summary_2007,
       mapping = aes(x = continent,
                     y = count)) +
  geom_col()
```

### with `geom_bar()`

1.  Write code to create the same barplot but using `geom_bar()` instead.

2.  Start with: `ggplot(data = gapminder_2007)` to use the `gapminder_2007` object as the data for plot.

3.  Then, add a comma after `gapminder_2007` and add `mapping = aes()` function.

4.  Inside `aes()`, add the following aesthetic mapping:

-   continent to the x-axis;

5.  Add a `+` at the end of the line, then on a new line add: `geom_bar()`

6.  Run the code and notice the plot is identical to the one created with `geom_col()`.

7.  Reflect: What does `geom_bar()` do differently than `geom_col()`? Write your answer here:

*Your answer here:*

```{r}
ggplot(data = gapminder_2007,
       mapping = aes(x = continent)) +
  geom_bar()
```

## Task 6: Create a histogram

1.  Write code to create a histogram showing the distribution of life expectancy colored by continent.

2.  Start with: `ggplot(data = gapminder_2007)` to use the `gapminder_2007` object as the data for plot.

3.  Then, add a comma after `gapminder_2007` and add `mapping = aes()` function.

4.  Inside `aes()`, add the following aesthetic mappings:

-   lifeExp to the x-axis;
-   continent to fill using the `fill = continent` argument

5.  Add a `+` at the end of the line, then on a new line add: `geom_histogram()`

6.  Run the code and observe the stacked histogram.

7.  Now modify `geom_histogram()` by adding these arguments inside the parentheses:
    - `col = "grey30"` (adds borders to bars)
    - `breaks = seq(40, 85, 2.5)` (controls bin width)

8.  Experiment: Change the numbers in `seq()` and describe what happens:

*Your answer here:*

```{r}
ggplot(data = gapminder_2007,
       mapping = aes(x = lifeExp,
                     fill = continent)) +
  geom_histogram(col = "grey30",
                 breaks = seq(40, 85, 2.5))
```

## Task 7: Scatterplot and faceting

1.  Write code to create a scatterplot showing the relationship between GDP per capita and life expectancy.

2.  Start with: `ggplot(data = gapminder_2007)` to use the `gapminder_2007` object as the data for plot.

3.  Then, add a comma after `gapminder_2007` and add `mapping = aes()` function.

4.  Inside `aes()`, add the following aesthetic mappings:

-   gdpPercap to the x-axis;
-   lifeExp to the y-axis;
-   population to size;
-   country to color

5.  Add a `+` at the end of the line, then on a new line add: `geom_point()`

6.  Run the code and notice the legend is overwhelming with too many countries.

7.  Modify `geom_point()` by adding `show.legend = FALSE` inside the parentheses.

8.  Add another `+` at the end, then on a new line add: `facet_wrap(~continent)` to create separate panels for each continent.

9.  Run the code and verify you see 5 panels with scatterplots, one for each continent.

```{r}
ggplot(data = gapminder_2007,
       mapping = aes(x = gdpPercap,
                     y = lifeExp,
                     size = pop,
                     color = country)) +
  geom_point(show.legend = FALSE) +
  facet_wrap(~continent)
```


## Task 10: Data communication

**In the YAML header (between the three dashes at the top of the document)**

1.  Add your name as the author of this document
2.  Render the document and fix any errors

## Task 11: Complete assignment

### Stage, Commit & Push to GitHub

1.  Open the Git pane in RStudio. It's in the top right corner in a separate tab.
2.  **Stage** your changes by checking appropriate box next to all files (if you select one file with your mouse, you can then highlight them all with Ctrl + A on your keyboard and check all boxes)
3.  Write a meaningful commit message (e.g. "Completed homework assignment 02.) in the **Commit message** box
4.  Click **Commit**. Note that every commit needs to have a commit message associated with it.

### Open an issue on GitHub

Once you have ensured that the Quarto document renders without errors and you have pushed all your changes to GitHub, you can complete the assignment by opening an issue on

1.  Open [github.com](https://github.com/) in your browser.
2.  Navigate to the GitHub organisation for the course.
3.  Find the repository md-02-assignments that ends with your GitHub username.
4.  Click on the "Issues" tab.
5.  Click on the green "New issue" button.
6.  In the "Title" field write: "Completed module 2 assignments".
7.  In the "Leave a comment" field, tag the course instructors @larnsce and ask some questions.
